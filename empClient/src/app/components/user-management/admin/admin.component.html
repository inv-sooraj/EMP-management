<app-header></app-header>

<body>
  <!-- Page Container -->
  <div class="w3-container w3-content" style="max-width: 1400px; margin-top: 80px">
    <!-- The Grid -->
    <div class="w3-row">
      <!-- Left Column -->
      <div class="w3-col m3">
        <!--Admin  Profile -->
        <div class="w3-card w3-round w3-white">
          <div class="w3-container">
            <h4 class="w3-center">My Profile</h4>
            <table>
              <tr style="width: 700px">
                <div class="aaa">
                  <img id="profile" width="250px" height="250px" src="assets/download.png" alt="assets/download.png"
                    class="w3-center" class="aaa" class="w3-circle" />
                </div>
              </tr>
              <hr />

              <tr *ngIf="admin">
                <p>
                  <i class="bi bi-person-circle fa-fw w3-margin-right w3-text-theme"><svg
                      xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="rgb(0, 145, 255)"
                      class="bi bi-person-circle" viewBox="0 0 16 16">
                      <path d="M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0z" />
                      <path fill-rule="evenodd"
                        d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1z" />
                    </svg></i>{{ admin.name }}
                </p>
                <p>
                  <i class="bi bi-envelope-fillfa-fw w3-margin-right w3-text-theme"><svg
                      xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="rgb(0, 145, 255)"
                      class="bi bi-envelope-fill" viewBox="0 0 16 16">
                      <path
                        d="M.05 3.555A2 2 0 0 1 2 2h12a2 2 0 0 1 1.95 1.555L8 8.414.05 3.555ZM0 4.697v7.104l5.803-3.558L0 4.697ZM6.761 8.83l-6.57 4.027A2 2 0 0 0 2 14h12a2 2 0 0 0 1.808-1.144l-6.57-4.027L8 9.586l-1.239-.757Zm3.436-.586L16 11.801V4.697l-5.803 3.546Z" />
                    </svg></i>{{ admin.email }}
                </p>
                <p>
                  <i class="fa fa-pencil fa-fw w3-margin-right w3-text-theme"></i>
                  Admin
                </p>
                <p>
                  <i class="fa fa-home fa-fw w3-margin-right w3-text-theme"></i>
                  {{ admin.address }}
                </p>
                <p>
                  <i class="fa fa-phone fa-fw w3-margin-right w3-text-theme"></i>
                  {{ admin.phoneNo }}
                </p>
              </tr>
            </table>

            <hr />
          </div>
        </div>
        <br />
        <!-- Accordion -->
        <div class="w3-card w3-round">
          <div class="w3-white">
            <button class="w3-button w3-block w3-theme-l1 w3-left-align" (click)="picupload.click()">
              <i class="fa fa-calendar-check-o fa-fw w3-margin-right"></i> Change Profile Picture
            </button>
            <input #picupload type="file" hidden (change)="onFileChanged($event)">
            <div id="Demo1" class="w3-hide w3-container">
              <p>Some text..</p>
            </div>
            <button (click)="open(mymodal)" class="w3-button w3-block w3-theme-l1 w3-left-align">
              <i class="fa fa-circle-o-notch fa-fw w3-margin-right"></i>
              Update Profile
            </button>
            <button (click)="open(passwordmodal)" class="w3-button w3-block w3-theme-l1 w3-left-align">
              <i class="fa fa-circle-o-notch fa-fw w3-margin-right"></i>
              Change password
            </button>
            <div id="Demo2" class="w3-hide w3-container">
              <p>Some other text..</p>
            </div>
            <br />
          </div>
        </div>
        <br />
        <!-- End Left Column -->
      </div>
      <!-- Middle Column -->
      <div class="w3-col m7">
        <div class="w3-row-padding">
          <div class="w3-col m12">
            <div class="w3-card w3-round w3-white">
              <div class="w3-container w3-padding">
                <p contenteditable="true" class="w3-border w3-padding">
                  Status: Active
                </p>
                <button type="button" class="w3-button w3-theme">
                  <i class="fa fa-pencil"></i> Post
                </button>
              </div>
            </div>
          </div>
        </div>
        <!-- End Middle Column -->
        <br />
      </div>
      <div class="w3-col m7">
        <div class="w3-row-padding">
          <div class="w3-col m12">
            <div class="w3-card w3-round w3-white">
              <div class="w3-container w3-padding">
                
                <div class="container">
                  <div class="row">
                  <div class="col-md-3">
                    <div class="card-counter primary">
                      <i class="fa fa-users"></i>
                      <span style="font-family: Tahoma ; font-size:50px ; position: relative;
                      bottom: 16px;
                      left: 78%;">{{userCount}}</span>
                      <span class="count-name">Flowz</span>
                    </div>
                  </div>
                </div>
                </div>

                <div class="container">
                  <div class="row">
                  <div class="col-md-3">
                    <div class="card-counter primary">
                      <i class="fa fa-pencil"></i>
                      <span style="font-family: Tahoma ; font-size:50px ; position: relative;
                      bottom: 16px;
                      left: 80%;">{{jobCount}}</span>
                      <span class="count-name">Flowz</span>
                    </div>
                  </div>
                </div>
                </div>

                <div class="container">
                  <div class="row">
                  <div class="col-md-3">
                    <div class="card-counter primary">
                      <i class="fa fa-envelope"></i>
                      <span style="font-family: Tahoma ; font-size:50px ; position: relative;
                      bottom: 16px;
                      left: 79%;">{{jobRequestCount}}</span>
                      <span class="count-name">Flowz</span>
                    </div>
                  </div>
                </div>
                </div>





              </div>
            </div>
          </div>
        </div>


        <!-- End Middle Column -->
      </div>
      <!-- Right Column -->
      <div class="w3-col m2">
        <div class="w3-card w3-round w3-white w3-center">
          <div class="w3-container">
            <p>Upcoming Events:</p>
            <img src alt="Forest" style="width: 100%" />
            <p><strong>Holiday</strong></p>
            <p>Friday 15:00</p>
            <p><button class="w3-button w3-block w3-theme-l4">Info</button></p>
          </div>
        </div>
        <br />
        <div class="w3-card w3-round w3-white w3-center">
          <div class="w3-container"></div>
        </div>
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <div class="w3-card w3-round w3-white w3-padding-16 w3-center">
          <p>ADS</p>
        </div>
        <br />

        <div class="w3-card w3-round w3-white w3-padding-32 w3-center">
          <p><i class="fa fa-bug w3-xxlarge"></i></p>
        </div>
      </div>
      <!-- End Grid -->
    </div>
    <!-- End Page Container -->
  </div>
  <br />
  <!-- Footer -->

</body>

<!-- Add/Edit modal  -->
<ng-template #mymodal let-modal>
  <div class="modal-header">
    <h4 class="modal-title" id="modal-basic-title">Update Profile</h4>
    <button type="button" class="close" aria-label="Close" id="closeUserUpdateModal"
      (click)="modal.dismiss('Cross click')" (click)="getDetails()">
      <span aria-hidden="true">×</span>
    </button>
  </div>
  <div class="modal-body">
    <app-update-user></app-update-user>
  </div>
</ng-template>


<!-- change password  modal  -->
<ng-template #passwordmodal let-modal>
  <div class="modal-header">
    <h4 class="modal-title" id="modal-basic-title">Update Profile</h4>
    <button type="button" class="close" aria-label="Close" id="closeChangePswdModal"
      (click)="modal.dismiss('Cross click')" (click)="getDetails()">
      <span aria-hidden="true">×</span>
    </button>
  </div>
  <div class="modal-body">
    <form [formGroup]="changePasswordForm" (ngSubmit)="changePassword()">
      <div class="form-outline mb-4">
        <input type="text" id="form5Example2" class="form-control" formControlName="currentPswd"
          [ngClass]="{'is-invalid': changePasswordForm.controls['currentPswd'].touched&& changePasswordForm.controls['currentPswd'].errors}" />
        <label class="form-label" for="form5Example2">Current Password</label>
        <div *ngIf="changePasswordForm.controls['currentPswd'].touched">
          <div *ngIf="changePasswordForm.controls['currentPswd']?.errors?.['required']" class="text-danger"> Password
            Required</div>
          <div *ngIf="changePasswordForm.controls['currentPswd']?.errors?.['minlength']" class="text-danger"> Minimum 8
            characters required</div>
          <div *ngIf="changePasswordForm.controls['currentPswd']?.errors?.['pattern']" class="text-danger">Password
            should contain atleast<br>
            one uppercase,special character,number</div><br>
        </div>
      </div>
      <div class="form-outline mb-4">
        <input type="text" id="form5Example2" class="form-control" formControlName="newPswd"
          [ngClass]="{'is-invalid': changePasswordForm.controls['newPswd'].touched&& changePasswordForm.controls['newPswd'].errors}" />
        <label class="form-label" for="form5Example2">New Password</label>
        <div *ngIf="changePasswordForm.controls['newPswd'].touched">
          <div *ngIf="changePasswordForm.controls['newPswd']?.errors?.['required']" class="text-danger"> Password
            Required</div>
          <div *ngIf="changePasswordForm.controls['newPswd']?.errors?.['minlength']" class="text-danger"> Minimum 8
            characters required</div>
          <div *ngIf="changePasswordForm.controls['newPswd']?.errors?.['pattern']" class="text-danger">Password
            should contain atleast<br>
            one uppercase,special character,number</div><br>
        </div>
      </div>
      <div class="form-outline mb-4">
        <input type="text" id="form5Example2" class="form-control" formControlName="confirmPswd"
          [ngClass]="{'is-invalid': changePasswordForm.controls['confirmPswd'].touched&& changePasswordForm.controls['confirmPswd'].errors}" />
        <label class="form-label" for="form5Example2">Confirm Password</label>
        <div
          *ngIf="(changePasswordForm.controls['confirmPswd'].touched||changePasswordForm.controls['confirmPswd'].dirty)"
          class="is-invalid">

          <div class="text-danger" *ngIf="changePasswordForm.controls['confirmPswd'].errors?.['required']">
            Re-enter Password.
          </div>

          <div class="text-danger"
            *ngIf="changePasswordForm.controls['newPswd'].value != changePasswordForm.controls['confirmPswd'].value">
            Password Should match
          </div>
        </div>
      </div>

      <button type="submit" class="btn btn-primary btn-block mb-4">Submit</button>
    </form>
  </div>
</ng-template>