<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons" />
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" />

<div class="container">
    <div class="table-wrapper">
        <div class="table-title">
            <div class="row">
                <div class="col-sm-6">
                    <h2>Manage <strong>users</strong></h2>
                </div>
                <div class="col-sm-6">
                    <button routerLink="/user-form" class="btn btn-success">
                        <svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" fill="currentColor"
                            class="bi bi-plus-circle-fill" viewBox="0 0 16 16">
                            <path
                                d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM8.5 4.5a.5.5 0 0 0-1 0v3h-3a.5.5 0 0 0 0 1h3v3a.5.5 0 0 0 1 0v-3h3a.5.5 0 0 0 0-1h-3v-3z" />
                        </svg>
                        &nbsp; Add user
                    </button>&nbsp;

                    <button (click)="deleteUsers()" class="btn btn-danger">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                            class="bi bi-trash3-fill" viewBox="0 0 16 16">
                            <path
                                d="M11 1.5v1h3.5a.5.5 0 0 1 0 1h-.538l-.853 10.66A2 2 0 0 1 11.115 16h-6.23a2 2 0 0 1-1.994-1.84L2.038 3.5H1.5a.5.5 0 0 1 0-1H5v-1A1.5 1.5 0 0 1 6.5 0h3A1.5 1.5 0 0 1 11 1.5Zm-5 0v1h4v-1a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5ZM4.5 5.029l.5 8.5a.5.5 0 1 0 .998-.06l-.5-8.5a.5.5 0 1 0-.998.06Zm6.53-.528a.5.5 0 0 0-.528.47l-.5 8.5a.5.5 0 0 0 .998.058l.5-8.5a.5.5 0 0 0-.47-.528ZM8 4.5a.5.5 0 0 0-.5.5v8.5a.5.5 0 0 0 1 0V5a.5.5 0 0 0-.5-.5Z" />
                        </svg>&nbsp;Delete Users
                    </button>

                    <button (click)="downloadCsv()" class="btn btn-danger">
                        <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="currentColor"
                            class="bi bi-arrow-down-circle-fill" viewBox="0 0 16 16">
                            <path
                                d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM8.5 4.5a.5.5 0 0 0-1 0v5.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V4.5z" />
                        </svg>&nbsp;Download
                    </button>
                </div>
            </div>
        </div>
        Number of items :

        <select [(ngModel)]="limit" (change)="setLimit()">
            <option selected="selected" [ngValue]="3">3</option>
            <option [ngValue]="4">4</option>
            <option [ngValue]="5">5</option>
        </select>

        <label for="search"></label> Search :
        <input type="text" id="search" [(ngModel)]="search" (keyup)="setSearch()" />

        <table class="table table-striped table-hover">
            <thead>
                <tr>
                    <th scope="col">
                        <span class="custom-checkbox">
                            <input type="checkbox" id="selectAll" (change)="checkAll($event)" />
                            <label for="selectAll"></label>
                        </span>
                    </th>


                    <th scope="col" (click)="setSort('user_id')">Id<span
                            class="glyphicon glyphicon-triangle-bottom"></span></th>
                    <th scope="col" (click)="setSort('name')">Name<span
                            class="glyphicon glyphicon-triangle-bottom"></span></th>
                    <th scope="col" (click)="setSort('userName')">User Name<span
                            class="glyphicon glyphicon-triangle-bottom"></span></th>
                    <th scope="col" (click)="setSort('email')">Email<span
                            class="glyphicon glyphicon-triangle-bottom"></span></th>
                    <th scope="col" (click)="setSort('update_date')">Last Update<span
                            class="glyphicon glyphicon-triangle-bottom"></span></th>
                    <th scope="col" (click)="setSort('status')">Status<span
                            class="glyphicon glyphicon-triangle-bottom"></span></th>
                    <th scope="col">Actions</th>


                </tr>
            </thead>

            <tbody *ngIf="userList.result">
                <tr *ngIf="userList.result.length == 0">
                    <th class="text-center" id="NoRecordsFound" colspan="10">
                        No Records Found
                    </th>
                </tr>
                <tr *ngFor="let user of userList.result">
                    <td>
                        <span class="custom-checkbox">
                            <input type="checkbox" id="checkbox{{ user.userId }}" value="{{ user.userId }}"
                                (change)="checkedUser($event)" />
                            <label for="checkbox{{ user.userId }}"></label>
                        </span>
                    </td>
                    <td>{{ user.userId }}</td>
                    <td>{{ user.name }}</td>
                    <td>{{ user.userName }}</td>
                    <td>{{ user.email }}</td>
                    <td>{{ user.updateDate }}</td>
                    <td>{{ user.status }}</td>

                    <td>
                        <a class="edit" data-toggle="modal" routerLink="/user-form/{{ user.userId }}"><em
                                class="material-icons" data-toggle="tooltip" title="Edit">&#xE254;</em></a>
                        <a class="delete" data-toggle="modal" (click)="deleteUser(user.userId)">
                            <em class="material-icons" data-toggle="tooltip" title="Delete">&#xE872;</em>
                        </a>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>

    <div class="clearfix" *ngIf="userList">
        <div class="hint-text">
            Showing
            <strong>{{ userList.itemStart }} </strong> to <strong> {{ userList.itemEnd }} </strong> out of
            <strong>{{ userList.numItems }}</strong> entries
        </div>

        <div>
            <ul class="pagination">
                <li class="page-item" [class.disabled]="!userList.hasPrevious">
                    <button class="page-link" (click)="prevPage()">Previous</button>
                </li>

                <li class="page-item" *ngFor="let s of numSeq(userList.numPages); let i = index"
                    [ngClass]="{ active: userList.currentPage == i + 1 }">
                    <button (click)="gotoPage(i + 1)" class="page-link">
                        {{ i + 1 }}
                    </button>
                </li>

                <li class="page-item" [class.disabled]="!userList.hasNext">
                    <button class="page-link" (click)="nextPage()">Next</button>
                </li>
            </ul>
        </div>
    </div>
</div>