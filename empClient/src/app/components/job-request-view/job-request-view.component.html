<div *ngIf="role==0">
<app-header></app-header>
</div>
<body>
    <div class="container-xl">
        <div class="table-responsive" style="height: 500px;">
            <div class="table-wrapper">
                <div class="table-title">
                    <div class="row">
                        <div class="col-sm-6">
                            <!-- <marquee>
                                <h2> Don't Miss <b>Apply Now</b></h2>
                            </marquee> -->
                        </div>
                        <!-- <div class="col-sm-6">
                            <button class="btn btn-success" type="button" routerLink="/list">View List</button>

                            
                        </div> -->

                        <div class="col-sm-6">
                            <button class="btn btn-info" type="button" (click)="logOut()">
                                Log Out
                            </button>

                            <!-- <button class="btn btn-success" type="button" (click)="addJob()" routerLink="/add">
                                Add Job
                            </button> -->
                            <!-- <button class="btn btn-success" type="button" routerLink="/adminDashboard">
                                View Users
                            </button> -->


                            <!-- <div>

                                <input type="search" placeholder="Search.." [(ngModel)]="search" (keyup)="setSearch()">
                            </div> -->



                            <!-- <a href="#addEmployeeModal" class="btn btn-success" data-toggle="modal"><i class="material-icons">&#xE147;</i> <span>Add New Employee</span></a> -->
                        </div>
                    </div>
                </div>
                <table class="table table-striped table-hover">
                    <thead>
                        <tr>
                            <th>
                                <span class="custom-checkbox">
                                    <input type="checkbox" id="selectAll" />
                                    <label for="selectAll"></label>
                                </span>
                            </th>

                            <th>Job Id</th>
                            <th>User Id</th>
                            <th>Remarks</th>
                            <th>Update Date</th>
                            <th>Status</th>
                            <th *ngIf="role!=2">Actions</th>
                        </tr>
                    </thead>
                    <tbody *ngIf="details">
                        <tr *ngFor="let val of details.result">
                            <td>
                                <span class="custom-checkbox">
                                    <input type="checkbox" id="checkbox1" name="options[]" value="1" />
                                    <label for="checkbox1"></label>
                                </span>
                            </td>

                            <td>{{ val.jobId }}</td>
                            <td>{{ val.userId }}</td>
                            <td>{{ val.remarks}}</td>
                            <td>{{ val.updateDate }}</td>
                            <td>{{ status[val.status] }}</td>


                            <!-- {{val.reqId}} -->
                            <td *ngIf="role!=2">


                                <button class="btn btn-outline-success mx-0" [disabled]="val.status == 0"
                                    (click)="open(remarkModal,0);remark=val.remarks;jobRequestId=val.reqId">Approve</button><br>

                                <button class="btn btn-outline-danger" [disabled]="val.status == 2"
                                    (click)="open(remarkModal,2);remark=val.remarks;jobRequestId=val.reqId">Reject</button>
                            </td>
                        </tr>
                    </tbody>
                </table>




            </div>
        </div>

        <div class="hint-text" *ngIf="details">
            Showing <strong>{{ details.result.length }}</strong> out of
            <strong>{{ details.numItems }}</strong> entries
        </div>

        <div class="clearfix">
            <!-- <div class="hint-text">Showing <b>1</b> out of <b>1</b> entries</div> -->
            <ul class="pagination" *ngIf="details">
                <!-- <li class="page-item disabled"></li> -->
                <button class="page-link" [class.disabled]="!details.hasPrevious" (click)="navPrevious()">
                    Previous
                </button>
                <!-- <button class="page-item"  (click)="navPrevious()">Previous</button> -->
                <li class="page-item" *ngFor="let s of numSeq(details.numPages); let i = index"
                    [ngClass]="{ active: details.currentPage == i + 1 }">
                    <button (click)="gotoPage(i + 1)" class="page-link">
                        {{ i + 1 }}
                    </button>
                </li>
                <!-- <li class="page-item"><a href="#" class="page-link">Next</a></li> -->
                <!-- <button class="page-item" [disabled]="!details.hasNext" (click)="navNext()">Next</button> -->
                <button class="page-link" [class.disabled]="!details.hasNext" (click)="navNext()">
                    Next
                </button>
            </ul>
        </div>

    </div>
    <!-- Edit Modal HTML -->
</body>

<!-- modal -->
<ng-template #remarkModal let-modal>
    <div class="modal-header">
        <h4 class="modal-title" id="modal-basic-title">Confirm</h4>
        <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
    </div>
    <div class="modal-body">

        <input [(ngModel)]="remark" class="form-control" placeholder="Remarks..." type="text" name="remark" id="remark">

    </div>
    <div class="modal-footer">
        <button *ngIf="action==0" class="btn btn-outline-success" (click)="modal.dismiss();sendConfim()"> Approve
        </button>
        <button *ngIf="action==2" class="btn btn-outline-danger" (click)="modal.dismiss();sendConfim()"> Reject </button>
    </div>
</ng-template>
<app-footer></app-footer>