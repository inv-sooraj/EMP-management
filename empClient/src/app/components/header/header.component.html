<nav class="navbar navbar-expand-lg navbar-dark bg-dark" *ngIf="[0, 1, 2].includes(getRole())">
    <div class="container-fluid">
        <a class="navbar-brand mb-0 h1" routerLink="/user-profile">{{getName()}}</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
            aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav" *ngIf="getName()">
                <li class="nav-item" *ngIf="getRole()==2">
                    <a class="nav-link active" aria-current="page" routerLink="/userchart">Dashboard</a>
                </li>
                <li class="nav-item" *ngIf="getRole()==2">
                    <a class="nav-link active" aria-current="page" routerLink="/user-list">Users</a>
                </li>
                <li class="nav-item " *ngIf="[1, 2].includes(getRole())">

                    <a class="nav-link active" aria-current="page" routerLink="/job-list">Job Manageent</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link active" aria-current="page" routerLink="/job-request-list">Job Requests</a>
                </li>
                <li class="nav-item " *ngIf="getRole()==0">
                    <a class="nav-link active" aria-current="page" routerLink="/job-apply">Job Apply</a>
                </li>
            </ul>
        </div>
    </div>
    <div class="col">
        <div ngbDropdown class="d-inline-block mx-2" display="dynamic">
            <button type="button" class="btn btn-outline-secondary" id="dropdownBasic1" ngbDropdownToggle>
                <span class="bi bi-person-circle" style="color: beige;"></span></button>
            <div ngbDropdownMenu aria-labelledby="dropdownBasic1" style="background:darkslategrey;">
                <button class="btn btn-dark text-white" ngbDropdownItem routerLink="/user-profile">Profile</button>
                <button class="btn btn-dark text-white" ngbDropdownItem (click)="open(changePasswordModal)">Change
                    Password</button>
                <button class="btn btn-dark text-white" ngbDropdownItem (click)="deleteUserAccount()">Deactivate
                    Account</button>
                <button (click)="logout()" class="btn btn-dark text-white" ngbDropdownItem>Logout</button>
            </div>
        </div>
    </div>
</nav>
<ng-template #changePasswordModal let-modal>
    <div class="modal-header">
        <h4 class="modal-title" id="modal-basic-title">Change Password</h4>
        <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
    </div>
    <div class="modal-body">

        <div class="card-body">

            <div class="container pt-2">

                <form [formGroup]="changePasswordForm" class="row g-3">

                    <div class="col-md-12">
                        <label for="currentPassword" class="form-label">Current Password</label>
                        <input type="text" formControlName="currentPassword" class="form-control"
                            [ngClass]="{'is-invalid':(changePasswordForm.controls['currentPassword'].touched||changePasswordForm.controls['currentPassword'].dirty) && changePasswordForm.controls['currentPassword'].errors}">

                        <div *ngIf="(changePasswordForm.controls['currentPassword'].touched||changePasswordForm.controls['currentPassword'].dirty)"
                            class="is-invalid">

                            <div class="text-danger"
                                *ngIf="changePasswordForm.controls['currentPassword'].errors?.['required']">
                                Current Password is required.
                            </div>
                            <div class="text-danger"
                                *ngIf="changePasswordForm.controls['currentPassword'].errors?.['pattern']">
                                Password must be 8 - 20 characters including one uppercase letter, one special character
                                and
                                alphanumeric characters
                            </div>
                        </div>
                    </div>

                    <div class="col-md-12">
                        <label for="newPassword" class="form-label">New Password</label>
                        <input type="text" formControlName="newPassword" class="form-control"
                            [ngClass]="{'is-invalid':(changePasswordForm.controls['newPassword'].touched||changePasswordForm.controls['newPassword'].dirty) && changePasswordForm.controls['newPassword'].errors}">

                        <div *ngIf="(changePasswordForm.controls['newPassword'].touched||changePasswordForm.controls['newPassword'].dirty)"
                            class="is-invalid">

                            <div class="text-danger"
                                *ngIf="changePasswordForm.controls['newPassword'].errors?.['required']">
                                New Password is required.
                            </div>
                            <div class="text-danger"
                                *ngIf="changePasswordForm.controls['newPassword'].errors?.['pattern']">
                                Password must be 8 - 20 characters including one uppercase letter, one special character
                                and
                                alphanumeric characters
                            </div>
                        </div>
                    </div>



                    <div class="col-md-12">
                        <label for="confirmNewPassword" class="form-label">Confirm New Password</label>
                        <input type="text" formControlName="confirmNewPassword" class="form-control"
                            [ngClass]="{'is-invalid':(changePasswordForm.controls['confirmNewPassword'].touched||changePasswordForm.controls['confirmNewPassword'].dirty) && changePasswordForm.controls['confirmNewPassword'].errors}">

                        <div *ngIf="(changePasswordForm.controls['confirmNewPassword'].touched||changePasswordForm.controls['confirmNewPassword'].dirty)"
                            class="is-invalid">

                            <div class="text-danger"
                                *ngIf="changePasswordForm.controls['confirmNewPassword'].errors?.['required']">
                                Re-enter New Password.
                            </div>

                            <div class="text-danger"
                                *ngIf="changePasswordForm.controls['confirmNewPassword'].value != changePasswordForm.controls['newPassword'].value">
                                Password Should match
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>

    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-outline-dark" (click)="changePassword()">Save</button>
    </div>
</ng-template>

<!-- Spinner -->
<div *ngIf="showSpinner" class="loading">Loading&#8230;</div>